"use strict";ang.controller("PlaylistCtrl",["$scope","$stateParams","$rootScope","$location","Users","$ionicLoading","$ionicScrollDelegate","Plugins","$ionicModal","$ionicPopup",function(e,a,n,o,t,r,s,i,u,p){var m=[];u.fromTemplateUrl("templates/equipamentos.html",{scope:e}).then(function(a){e.equipamentos=a}),0!=o.search().v&&(r.show({template:"Aguarde..."}),t.returnUsers().then(function(a){m=a,e.personagem=m.search({key:"nome",value:o.search().v});for(var n=0;n<e.personagem.equipamentos.length;n++)delete e.personagem.equipamentos[n].$$hashKey;r.hide(),s.scrollTop(),e.$digest()})),e.parametro=a.playlistId,"Atributos"==e.parametro&&(e.atributos=!0),"Pericias"==e.parametro&&(e.pericias=!0),"Vantagens"==e.parametro&&(e.vantagens=!0),"Desvantagens"==e.parametro&&(e.desvantagens=!0),"Equipamentos"==e.parametro&&(e.equipament=!0),e.plus=function(a){a.plus++;var n=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(n,e.personagem.id)},e.less=function(a){a.plus--;var n=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(n,e.personagem.id)},e.plusVantagem=function(a){a.plus++;var n=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(n,e.personagem.id)},e.lessVantagem=function(a){a.plus--;var n=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(n,e.personagem.id)},e.plusdesvantagem=function(a){a.plus++;var n=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(n,e.personagem.id)},e.lessdesvantagem=function(a){a.plus--;var n=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(n,e.personagem.id)},e.addEquipamentos=function(){e.equipamento&&(e.equipamento.nome="",e.equipamento.descricao=""),e.edit=!1,e.equipamentos.show()},e.salvarEquipamento=function(a){var n={nome:a.nome,descricao:a.descricao};if(""!=n.nome){for(var o=e.personagem.equipamentos.length-1;o>=0;o--)delete e.personagem.equipamentos[o].$$hashKey;e.personagem.equipamentos.push(n);var r=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(r,e.personagem.id),e.equipamentos.hide().then(function(){a.nome="",a.descricao=""})}},e.editarEquipamento=function(a){e.equipamentoedit=a,e.edit=!0,e.equipamentos.show()},e.editarEquipamentoUsuario=function(){var a=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(a,e.personagem.id),e.equipamentos.hide()},e.removerEquipamento=function(a){p.confirm({title:"Remover Equipamento?",template:"Deseja realmente remover este equipamento?"}).then(function(n){if(n){e.personagem.equipamentos.remove({key:"nome",value:a.nome});var o=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(o,e.personagem.id)}})},e.removerEquipamentos=function(){p.confirm({title:"Remover Equipamentos?",template:"Deseja realmente remover todos equipamentos?"}).then(function(a){if(a){e.personagem.equipamentos=[];var n=t.returnUserToSave(e.personagem);i.Sql.executeQueryUpdate(n,e.personagem.id)}})},e.closeModal=function(a){"equipamentos"==a&&e.equipamentos.hide()},e.$on("eventoResetDados",function(){e.personagem=null})}]);