"use strict";ang.factory("Users",["TabelaDano","Plugins",function(t,s){return{returnUsers:function(){var i=[];try{var r=new Promise(function(r,a){document.addEventListener("deviceready",function(){s.Sql.Init().then(function(s){s.transaction(function(s){s.executeSql("select id,data from tbpersonagens;",[],function(s,o){for(var u=0;u<o.rows.length;u++){var n=JSON.parse(o.rows.item(u).data),e=o.rows.item(u).id;n.id=e;var h={getVelBas:function(){return(this.atributos.ht+this.atributos.dx)/4},getDesBas:function(){return Math.round((this.atributos.ht+this.atributos.dx)/4)},getGdp:function(){return t.returnTabela().getTabelaDanoPorSt(this.atributos.st).gdp},getGeb:function(){return t.returnTabela().getTabelaDanoPorSt(this.atributos.st).geb},getEsquiva:function(){return Math.round(this.atributos.ht+this.atributos.dx)/4+3},getNenhuma:function(){return{bc:Math.floor(this.atributos.st*this.atributos.st/10),db:Math.floor((this.atributos.ht+this.atributos.dx)/4),es:Math.floor((this.atributos.ht+this.atributos.dx)/4)+3}},getLeve:function(){return{bc:2*Math.floor(this.atributos.st*this.atributos.st/10),db:Math.floor((this.atributos.ht+this.atributos.dx)/4*.8),es:Math.floor((this.atributos.ht+this.atributos.dx)/4)+3-1}},getMedia:function(){return{bc:3*Math.floor(this.atributos.st*this.atributos.st/10),db:Math.floor((this.atributos.ht+this.atributos.dx)/4*.6),es:Math.floor((this.atributos.ht+this.atributos.dx)/4)+3-2}},getPesada:function(){return{bc:6*Math.floor(this.atributos.st*this.atributos.st/10),db:Math.floor((this.atributos.ht+this.atributos.dx)/4*.4),es:Math.floor((this.atributos.ht+this.atributos.dx)/4)+3-3}},getMuitoPesada:function(){return{bc:10*Math.floor(this.atributos.st*this.atributos.st/10),db:Math.floor((this.atributos.ht+this.atributos.dx)/4*.2),es:Math.floor((this.atributos.ht+this.atributos.dx)/4)+3-4}},getPrecoFicha:function(){var t=0,s=0,i=0,r=0;return this.__atributos.st>0&&(t=10*(this.__atributos.st-10)),this.__atributos.dx>0&&(s=20*(this.__atributos.dx-10)),this.__atributos.iq>0&&(i=20*(this.__atributos.iq-10)),this.__atributos.ht>0&&(r=10*(this.__atributos.ht-10)),parseInt(t)+parseInt(s)+parseInt(i)+parseInt(r)},getPrecoFichaReal:function(){var t=this.getPrecoFicha()+this.getCustoPericias()+this.getCustoVantagens()+this.getCustoDesVantagens(),s=2*(this.atributos.pv-this.__atributos.pv),i=3*(this.atributos.pf-this.__atributos.pf),r=5*(this.atributos.per-this.__atributos.per),a=5*(this.atributos.von-this.__atributos.von),o=10*(this.atributos.st-this.__atributos.st),u=20*(this.atributos.dx-this.__atributos.dx),n=20*(this.atributos.iq-this.__atributos.iq),e=10*(this.atributos.ht-this.__atributos.ht);return t+=s+i+r+a+o+u+n+e},getCustoPericias:function(){for(var t=0,s=0;s<this.pericias.length;s++)"FACIL"==this.pericias[s].custo&&(t+=1+this.pericias[s].plus),"MEDIO"==this.pericias[s].custo&&(t+=2*this.pericias[s].plus+2),"DIFICIL"==this.pericias[s].custo&&(t+=4*this.pericias[s].plus+4),"MUITO DIFICIL"==this.pericias[s].custo&&(t+=8*this.pericias[s].plus+8);return parseInt(t)},getCustoVantagens:function(){for(var t=0,s=0;s<this.vantagens.length;s++)t+=parseInt(this.vantagens[s].custo);return parseInt(t)},getCustoDesVantagens:function(){for(var t=0,s=0;s<this.desvantagens.length;s++)t+=parseInt(this.desvantagens[s].custo);return parseInt(t)},getVantagemValor:function(t){return parseInt(t.custo)},getdesvantagemValor:function(t){return parseInt(t.custo)},getPericiaValor:function(t){var s="";return"DX"==t.nh&&(s=this.atributos.dx),"VON"==t.nh&&(s=this.atributos.von),"IQ"==t.nh&&(s=this.atributos.iq),"PER"==t.nh&&(s=this.atributos.per),"HT"==t.nh&&(s=this.atributos.ht),"PF"==t.nh&&(s=this.atributos.pf),"PV"==t.nh&&(s=this.atributos.pv),"ST"==t.nh&&(s=this.atributos.st),parseInt(s)}};angular.extend(n,h),i.push(n)}i.length>0?r(i):a([])})})})})});return r}catch(t){throw t}},getUser:function(){return{id:"",nome:"",jogador:"",mote:"",background:"",img:"",atributos:{st:"",dx:"",iq:"",ht:"",pv:"",per:"",von:"",fad:""},__atributos:{st:"",dx:"",iq:"",ht:"",pv:"",per:"",von:"",fad:""},pericias:[],vantagens:[],desvantagens:[],equipamentos:[],getVelBas:function(){return""},getDesBas:function(){return""},getGdp:function(){return""},getGeb:function(){return""},getEsquiva:function(){return""}}},returnUserToSave:function(t){var s=function(t){var s=0;return s=t>100?100:t<1?1:t},i=function(t,s){var i="";return i=t.length>s?t.substr(0,s):t};return t.atributos.st=s(t.atributos.st),t.atributos.dx=s(t.atributos.dx),t.atributos.iq=s(t.atributos.iq),t.atributos.ht=s(t.atributos.ht),t.mote=i(t.mote,100),t.background=i(t.background,21),JSON.stringify(t)}}}]);